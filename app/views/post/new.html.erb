<link href="http://cdn.staticfile.org/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet">

<link href="http://cdn.staticfile.org/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/stylesheets/jquery.qeditor.css" type="text/css">
  
<style type="text/css" media="screen">
  .textarea {
    background-color: #ffffff;
    border: 1px solid #cccccc;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    -webkit-transition: border linear .2s, box-shadow linear .2s;
    -moz-transition: border linear .2s, box-shadow linear .2s;
    -o-transition: border linear .2s, box-shadow linear .2s;
    transition: border linear .2s, box-shadow linear .2s;
    padding: 4px 6px;
    font-size: 14px;
    line-height: 20px;
    color: #555555;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    vertical-align: middle;
    outline: none;
    height: 400px;
  }
</style>

<script src="/javascripts/jquery.qeditor.js" type="text/javascript"></script>

<div class="leftbox"> 
<div class="left_wrapper"> 
	<div class="box" > <h1>发布文章</h1>  </div>
 	
	<% form_for (:post,@post,:url=>{:controller=>'post',:action=>'create'}) do |f| %>
	
	<table width="100%">
		<tr width="100%">
			<td class="name">标题:</td>
			<td class="value">
				<%= f.text_field :title %>
			</td>
		</tr>
		<tr width="100%">
			<td class="name">作者:</td>
			<td class="value">
				<%= f.text_field :author,:value=>"#{session[:user].username}",:readonly=>true %>
			</td>
		</tr>

		<tr width="100%">
			<td class="name">摘要:</td>
			<td class="value">
				<%= f.text_field :abstract %>
			</td>
		</tr>
		<tr width="100%">
			<td class="name">类别:</td>
			<td class="value">
				<%= f.text_field :category %>
			</td>
		</tr>
		<tr>
			<td class="name">标签:</td>
			<td class="value">
				<% fields_for :tags do |tag| %>
					<%= tag.text_field :tag_name %>
				<% end %>&nbsp;Just Only One
			</td>
		</tr>
		<tr width="100%">
			<td class="name">是否有效:</td>
			<td class="value">
				<%= f.text_field :enabled %>
			</td>
		</tr>
		<tr width="100%">
			<td class="name" style="border:0px solid; vertical-align:top;">内容:</td>
			<td class="value" style="border:0px solid #3322ff; vertical-align:top;">


<%= f.text_area :content,:class=>"textarea",:id=>"post_body",:placeholder=>"Type your post" %>      		 		

			</td>
		</tr>
	 
	</table>
	
	<br/>
	
	<div class="actions" align="right" >
    	<button type="submit" class="button submit">保存</button>
	</div> 
	
	<% end %>
</div> 
 
</div>
	 
 <!--侧边栏 开始 -->
<div class="sidebar" > 
<div class="box"> 
	 <h2>文章操作</h2> 
    <div class="inner" style="line-height:180%;padding:0px;background:#fff5c9;"> 
      <a href="/post/new">发布文章</a> <br/>
    </div>
      <a href="/post/index">所有文章</a><br/> 
</div> 
</div> 
<!-- 侧边栏结束 -->


<div class="image_upload" style="display:block;">

	<% form_for (:post,@post,:url=>{:controller=>'post',:action=>'upload'},:html=>{:multipart => true}   ) do |f| %>

		<table>
		<tr width="100%">
		<td class="name">图片:</td>
		<td class="value">

		   <%=f.file_field :image %>
		   
		</td>
		<td>
			<%=f.submit "上传" %>
		</td>
		</tr>
		</table>

	<% end %>

</div>




<script type="text/javascript">	

    try{    	
    	$("#post_body").qeditor({});	
	}catch(e){
		alert(e.message);
	}

    var toolbar = $("#post_body").parent().find(".qeditor_toolbar");
    var link = $("<a href='#'><span class='icon-file'></span></a>");
    toolbar.append(link);

    link.click(function(){
    	
      // $(".image_upload").css("style","display:block;");
      alert("应该弹出一个对话框.");

      return false;
    
    });

</script>